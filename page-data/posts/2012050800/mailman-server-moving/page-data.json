{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/2012050800/mailman-server-moving","result":{"data":{"markdownRemark":{"id":"bf86be29-73a4-5651-b4e9-4eab785a9e3f","html":"<p>さくらの VPS でプランを乗り換えたので、サーバの引っ越しをする必要ができた。\nML の引っ越しのために、Mailman の設定移行方法をメモ。</p>\n<p>Mailman はパッケージで導入。\n普通に入れたら英語環境だけになってしまったので、インストール後にパッケージ設定をもう一度叩いて、日本語環境をインストール。</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> dpkg-reconfigure mailman</code></pre></div>\n<p>パーミッションをチェックするプログラムを実行。</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> check_perms -f</code></pre></div>\n<p>サイトの管理者パスワードを設定。</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> mmsitepass</code></pre></div>\n<p>基本設定をする。\n基本的には <code class=\"language-text\">mm_cfg.py</code> を書き写していくだけ。</p>\n<p>mailman が生成する <code class=\"language-text\">aliases</code> ファイルを参照するように、Postfix を設定。\nApache も引っ越し元を参考にしながら設定を写す。</p>\n<p>引っ越し元サーバの mailman ディレクトリ以下、<code class=\"language-text\">lists</code> ディレクトリに ML の設定があるので、必要な ML のディレクトリを丸ごとコピーする。</p>\n<p><code class=\"language-text\">archive</code> ディレクトリに過去記事があるので、<code class=\"language-text\">private</code> または <code class=\"language-text\">public</code> ディレクトリも丸ごとコピー。</p>\n<p><code class=\"language-text\">mailman/bin/genalias</code> コマンドで <code class=\"language-text\">aliases</code> を設定。</p>\n<p>ML の管理者パスワードだけが、上記の方法ではコピーできない。\nML ごとにパスワードを設定し直す。</p>\n<p><strong>5/10追記:</strong>\n上記の手順では、各 ML の設定ファイルに埋まっているサイトの URL が変更されない。\nURL が違うために、投稿が保留されたメールの承認などができなくなった。\n修正するためには次のコマンドを実行する。</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> withlist -l -r fix_url ML名</code></pre></div>","fields":{"slug":"/posts/2012050800/mailman-server-moving","tagSlugs":["/tag/mail/"]},"frontmatter":{"date":"2012-05-08T00:00:00.000Z","description":"さくらの VPS でプランを乗り換えたので、サーバの引っ越しをする必要ができた。ML の引っ越しのために、Mailman の設定移行方法をメモ。","tags":["Mail"],"title":"Mailman の引っ越し","socialImage":null}}},"pageContext":{"slug":"/posts/2012050800/mailman-server-moving"}},"staticQueryHashes":["251939775","401334301","825871152"]}